"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireWildcard(require("react"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _styledComponents2 = require("../common/styled-components");

var _timeRangeSlider = _interopRequireDefault(require("../common/time-range-slider"));

var _floatingTimeDisplay = _interopRequireDefault(require("../common/animation-control/floating-time-display"));

var _timeRangeFilter = require("./time-range-filter");

var _timeWidgetTop = _interopRequireDefault(require("./time-widget-top"));

var _templateObject;

var TimeBottomWidgetInner = (0, _styledComponents["default"])(_styledComponents2.BottomWidgetInner)(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  padding: 6px 32px 24px 32px;\n"])));
TimeWidgetFactory.deps = [_timeRangeSlider["default"], _floatingTimeDisplay["default"], _timeWidgetTop["default"]];

function TimeWidgetFactory(TimeRangeSlider, FloatingTimeDisplay, TimeWidgetTop) {
  var TimeWidget = function TimeWidget(_ref) {
    var datasets = _ref.datasets,
        filter = _ref.filter,
        index = _ref.index,
        readOnly = _ref.readOnly,
        showTimeDisplay = _ref.showTimeDisplay,
        setFilterAnimationTime = _ref.setFilterAnimationTime,
        onClose = _ref.onClose,
        resetAnimation = _ref.resetAnimation,
        isAnimatable = _ref.isAnimatable,
        updateAnimationSpeed = _ref.updateAnimationSpeed,
        toggleAnimation = _ref.toggleAnimation,
        setFilterPlot = _ref.setFilterPlot,
        setFilterAnimationWindow = _ref.setFilterAnimationWindow,
        timeline = _ref.timeline;

    var _useState = (0, _react.useState)(false),
        _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
        isMinified = _useState2[0],
        setMinified = _useState2[1];

    var _updateAnimationSpeed = (0, _react.useCallback)(function (speed) {
      return updateAnimationSpeed(index, speed);
    }, [updateAnimationSpeed, index]);

    var _toggleAnimation = (0, _react.useCallback)(function () {
      return toggleAnimation(index);
    }, [toggleAnimation, index]);

    var _onToggleMinify = (0, _react.useCallback)(function () {
      return setMinified(!isMinified);
    }, [setMinified, isMinified]);

    var _setFilterAnimationWindow = (0, _react.useCallback)(function (animationWindow) {
      return setFilterAnimationWindow({
        id: filter.id,
        animationWindow: animationWindow
      });
    }, [setFilterAnimationWindow, filter.id]);

    var timeSliderOnChange = (0, _react.useCallback)(function (value) {
      return setFilterAnimationTime(index, 'value', value);
    }, [setFilterAnimationTime, index]);
    return /*#__PURE__*/_react["default"].createElement(TimeBottomWidgetInner, {
      className: "bottom-widget--inner"
    }, /*#__PURE__*/_react["default"].createElement(TimeWidgetTop, {
      filter: filter,
      readOnly: readOnly,
      datasets: datasets,
      setFilterPlot: setFilterPlot,
      index: index,
      onClose: onClose,
      onToggleMinify: _onToggleMinify,
      isMinified: isMinified
    }), /*#__PURE__*/_react["default"].createElement(TimeRangeSlider, (0, _extends2["default"])({}, (0, _timeRangeFilter.timeRangeSliderFieldsSelector)(filter), {
      onChange: timeSliderOnChange,
      toggleAnimation: _toggleAnimation,
      updateAnimationSpeed: _updateAnimationSpeed,
      setFilterAnimationWindow: _setFilterAnimationWindow,
      hideTimeTitle: showTimeDisplay,
      resetAnimation: resetAnimation,
      isAnimatable: isAnimatable,
      isMinified: isMinified,
      timeline: timeline
    })), showTimeDisplay ? /*#__PURE__*/_react["default"].createElement(FloatingTimeDisplay, {
      currentTime: filter.value,
      defaultTimeFormat: filter.defaultTimeFormat,
      timeFormat: filter.timeFormat,
      timezone: filter.timezone
    }) : null);
  };

  return /*#__PURE__*/_react["default"].memo(TimeWidget);
}

var _default = TimeWidgetFactory;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3NyYy9maWx0ZXJzL3RpbWUtd2lkZ2V0LnRzeCJdLCJuYW1lcyI6WyJUaW1lQm90dG9tV2lkZ2V0SW5uZXIiLCJCb3R0b21XaWRnZXRJbm5lciIsIlRpbWVXaWRnZXRGYWN0b3J5IiwiZGVwcyIsIlRpbWVSYW5nZVNsaWRlckZhY3RvcnkiLCJGbG9hdGluZ1RpbWVEaXNwbGF5RmFjdG9yeSIsIlRpbWVXaWRnZXRUb3BGYWN0b3J5IiwiVGltZVJhbmdlU2xpZGVyIiwiRmxvYXRpbmdUaW1lRGlzcGxheSIsIlRpbWVXaWRnZXRUb3AiLCJUaW1lV2lkZ2V0IiwiZGF0YXNldHMiLCJmaWx0ZXIiLCJpbmRleCIsInJlYWRPbmx5Iiwic2hvd1RpbWVEaXNwbGF5Iiwic2V0RmlsdGVyQW5pbWF0aW9uVGltZSIsIm9uQ2xvc2UiLCJyZXNldEFuaW1hdGlvbiIsImlzQW5pbWF0YWJsZSIsInVwZGF0ZUFuaW1hdGlvblNwZWVkIiwidG9nZ2xlQW5pbWF0aW9uIiwic2V0RmlsdGVyUGxvdCIsInNldEZpbHRlckFuaW1hdGlvbldpbmRvdyIsInRpbWVsaW5lIiwiaXNNaW5pZmllZCIsInNldE1pbmlmaWVkIiwiX3VwZGF0ZUFuaW1hdGlvblNwZWVkIiwic3BlZWQiLCJfdG9nZ2xlQW5pbWF0aW9uIiwiX29uVG9nZ2xlTWluaWZ5IiwiX3NldEZpbHRlckFuaW1hdGlvbldpbmRvdyIsImFuaW1hdGlvbldpbmRvdyIsImlkIiwidGltZVNsaWRlck9uQ2hhbmdlIiwidmFsdWUiLCJkZWZhdWx0VGltZUZvcm1hdCIsInRpbWVGb3JtYXQiLCJ0aW1lem9uZSIsIlJlYWN0IiwibWVtbyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvQkE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7QUFFQSxJQUFNQSxxQkFBcUIsR0FBRyxrQ0FBT0Msb0NBQVAsQ0FBSCx3SEFBM0I7QUFJQUMsaUJBQWlCLENBQUND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QkFBb0IsRUFBRUYscUJBSnhCO0FBS0UsTUFBQSx3QkFBd0IsRUFBRUkseUJBTDVCO0FBTUUsTUFBQSxhQUFhLEVBQUVoQixlQU5qQjtBQU9FLE1BQUEsY0FBYyxFQUFFRyxjQVBsQjtBQVFFLE1BQUEsWUFBWSxFQUFFQyxZQVJoQjtBQVNFLE1BQUEsVUFBVSxFQUFFTSxVQVRkO0FBVUUsTUFBQSxRQUFRLEVBQUVEO0FBVlosT0FiRixFQXlCR1QsZUFBZSxnQkFDZCxnQ0FBQyxtQkFBRDtBQUNFLE1BQUEsV0FBVyxFQUFFSCxNQUFNLENBQUN1QixLQUR0QjtBQUVFLE1BQUEsaUJBQWlCLEVBQUV2QixNQUFNLENBQUN3QixpQkFGNUI7QUFHRSxNQUFBLFVBQVUsRUFBRXhCLE1BQU0sQ0FBQ3lCLFVBSHJCO0FBSUUsTUFBQSxRQUFRLEVBQUV6QixNQUFNLENBQUMwQjtBQUpuQixNQURjLEdBT1osSUFoQ04sQ0FERjtBQW9DRCxHQXpFRDs7QUEyRUEsc0JBQU9DLGtCQUFNQyxJQUFOLENBQVc5QixVQUFYLENBQVA7QUFDRDs7ZUFFY1IsaUIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMjMgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuXG5pbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlU3RhdGV9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IHtCb3R0b21XaWRnZXRJbm5lcn0gZnJvbSAnLi4vY29tbW9uL3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCBUaW1lUmFuZ2VTbGlkZXJGYWN0b3J5IGZyb20gJy4uL2NvbW1vbi90aW1lLXJhbmdlLXNsaWRlcic7XG5pbXBvcnQgRmxvYXRpbmdUaW1lRGlzcGxheUZhY3RvcnkgZnJvbSAnLi4vY29tbW9uL2FuaW1hdGlvbi1jb250cm9sL2Zsb2F0aW5nLXRpbWUtZGlzcGxheSc7XG5pbXBvcnQge3RpbWVSYW5nZVNsaWRlckZpZWxkc1NlbGVjdG9yfSBmcm9tICcuL3RpbWUtcmFuZ2UtZmlsdGVyJztcbmltcG9ydCB7VGltZVdpZGdldFByb3BzfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCBUaW1lV2lkZ2V0VG9wRmFjdG9yeSBmcm9tICcuL3RpbWUtd2lkZ2V0LXRvcCc7XG5cbmNvbnN0IFRpbWVCb3R0b21XaWRnZXRJbm5lciA9IHN0eWxlZChCb3R0b21XaWRnZXRJbm5lcilgXG4gIHBhZGRpbmc6IDZweCAzMnB4IDI0cHggMzJweDtcbmA7XG5cblRpbWVXaWRnZXRGYWN0b3J5LmRlcHMgPSBbVGltZVJhbmdlU2xpZGVyRmFjdG9yeSwgRmxvYXRpbmdUaW1lRGlzcGxheUZhY3RvcnksIFRpbWVXaWRnZXRUb3BGYWN0b3J5XTtcblxuZnVuY3Rpb24gVGltZVdpZGdldEZhY3RvcnkoXG4gIFRpbWVSYW5nZVNsaWRlcjogUmV0dXJuVHlwZTx0eXBlb2YgVGltZVJhbmdlU2xpZGVyRmFjdG9yeT4sXG4gIEZsb2F0aW5nVGltZURpc3BsYXk6IFJldHVyblR5cGU8dHlwZW9mIEZsb2F0aW5nVGltZURpc3BsYXlGYWN0b3J5PixcbiAgVGltZVdpZGdldFRvcDogUmV0dXJuVHlwZTx0eXBlb2YgVGltZVdpZGdldFRvcEZhY3Rvcnk+XG4pIHtcbiAgY29uc3QgVGltZVdpZGdldDogUmVhY3QuRkM8VGltZVdpZGdldFByb3BzPiA9ICh7XG4gICAgZGF0YXNldHMsXG4gICAgZmlsdGVyLFxuICAgIGluZGV4LFxuICAgIHJlYWRPbmx5LFxuICAgIHNob3dUaW1lRGlzcGxheSxcbiAgICBzZXRGaWx0ZXJBbmltYXRpb25UaW1lLFxuICAgIG9uQ2xvc2UsXG4gICAgcmVzZXRBbmltYXRpb24sXG4gICAgaXNBbmltYXRhYmxlLFxuICAgIHVwZGF0ZUFuaW1hdGlvblNwZWVkLFxuICAgIHRvZ2dsZUFuaW1hdGlvbixcbiAgICBzZXRGaWx0ZXJQbG90LFxuICAgIHNldEZpbHRlckFuaW1hdGlvbldpbmRvdyxcbiAgICB0aW1lbGluZVxuICB9OiBUaW1lV2lkZ2V0UHJvcHMpID0+IHtcbiAgICBjb25zdCBbaXNNaW5pZmllZCwgc2V0TWluaWZpZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gICAgY29uc3QgX3VwZGF0ZUFuaW1hdGlvblNwZWVkID0gdXNlQ2FsbGJhY2soc3BlZWQgPT4gdXBkYXRlQW5pbWF0aW9uU3BlZWQoaW5kZXgsIHNwZWVkKSwgW1xuICAgICAgdXBkYXRlQW5pbWF0aW9uU3BlZWQsXG4gICAgICBpbmRleFxuICAgIF0pO1xuXG4gICAgY29uc3QgX3RvZ2dsZUFuaW1hdGlvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHRvZ2dsZUFuaW1hdGlvbihpbmRleCksIFt0b2dnbGVBbmltYXRpb24sIGluZGV4XSk7XG5cbiAgICBjb25zdCBfb25Ub2dnbGVNaW5pZnkgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRNaW5pZmllZCghaXNNaW5pZmllZCksIFtzZXRNaW5pZmllZCwgaXNNaW5pZmllZF0pO1xuXG4gICAgY29uc3QgX3NldEZpbHRlckFuaW1hdGlvbldpbmRvdyA9IHVzZUNhbGxiYWNrKFxuICAgICAgYW5pbWF0aW9uV2luZG93ID0+IHNldEZpbHRlckFuaW1hdGlvbldpbmRvdyh7aWQ6IGZpbHRlci5pZCwgYW5pbWF0aW9uV2luZG93fSksXG4gICAgICBbc2V0RmlsdGVyQW5pbWF0aW9uV2luZG93LCBmaWx0ZXIuaWRdXG4gICAgKTtcblxuICAgIGNvbnN0IHRpbWVTbGlkZXJPbkNoYW5nZSA9IHVzZUNhbGxiYWNrKHZhbHVlID0+IHNldEZpbHRlckFuaW1hdGlvblRpbWUoaW5kZXgsICd2YWx1ZScsIHZhbHVlKSwgW1xuICAgICAgc2V0RmlsdGVyQW5pbWF0aW9uVGltZSxcbiAgICAgIGluZGV4XG4gICAgXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFRpbWVCb3R0b21XaWRnZXRJbm5lciBjbGFzc05hbWU9XCJib3R0b20td2lkZ2V0LS1pbm5lclwiPlxuICAgICAgICA8VGltZVdpZGdldFRvcFxuICAgICAgICAgIGZpbHRlcj17ZmlsdGVyfVxuICAgICAgICAgIHJlYWRPbmx5PXtyZWFkT25seX1cbiAgICAgICAgICBkYXRhc2V0cz17ZGF0YXNldHN9XG4gICAgICAgICAgc2V0RmlsdGVyUGxvdD17c2V0RmlsdGVyUGxvdH1cbiAgICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgICAgb25DbG9zZT17b25DbG9zZX1cbiAgICAgICAgICBvblRvZ2dsZU1pbmlmeT17X29uVG9nZ2xlTWluaWZ5fVxuICAgICAgICAgIGlzTWluaWZpZWQ9e2lzTWluaWZpZWR9XG4gICAgICAgIC8+XG4gICAgICAgIHsvKiBPbmNlIEFuaW1hdGlvbkNvbnRyb2wgaXMgYWJsZSB0byBkaXNwbGF5IGxhcmdlIHRpbWVsaW5lKi99XG4gICAgICAgIHsvKiB3ZSBjYW4gcmVwbGFjZSBUaW1lUmFuZ2VTbGlkZXIgd2l0aCBBbmltYXRpb25Db250cm9sKi99XG4gICAgICAgIDxUaW1lUmFuZ2VTbGlkZXJcbiAgICAgICAgICB7Li4udGltZVJhbmdlU2xpZGVyRmllbGRzU2VsZWN0b3IoZmlsdGVyKX1cbiAgICAgICAgICBvbkNoYW5nZT17dGltZVNsaWRlck9uQ2hhbmdlfVxuICAgICAgICAgIHRvZ2dsZUFuaW1hdGlvbj17X3RvZ2dsZUFuaW1hdGlvbn1cbiAgICAgICAgICB1cGRhdGVBbmltYXRpb25TcGVlZD17X3VwZGF0ZUFuaW1hdGlvblNwZWVkfVxuICAgICAgICAgIHNldEZpbHRlckFuaW1hdGlvbldpbmRvdz17X3NldEZpbHRlckFuaW1hdGlvbldpbmRvd31cbiAgICAgICAgICBoaWRlVGltZVRpdGxlPXtzaG93VGltZURpc3BsYXl9XG4gICAgICAgICAgcmVzZXRBbmltYXRpb249e3Jlc2V0QW5pbWF0aW9ufVxuICAgICAgICAgIGlzQW5pbWF0YWJsZT17aXNBbmltYXRhYmxlfVxuICAgICAgICAgIGlzTWluaWZpZWQ9e2lzTWluaWZpZWR9XG4gICAgICAgICAgdGltZWxpbmU9e3RpbWVsaW5lfVxuICAgICAgICAvPlxuICAgICAgICB7c2hvd1RpbWVEaXNwbGF5ID8gKFxuICAgICAgICAgIDxGbG9hdGluZ1RpbWVEaXNwbGF5XG4gICAgICAgICAgICBjdXJyZW50VGltZT17ZmlsdGVyLnZhbHVlfVxuICAgICAgICAgICAgZGVmYXVsdFRpbWVGb3JtYXQ9e2ZpbHRlci5kZWZhdWx0VGltZUZvcm1hdH1cbiAgICAgICAgICAgIHRpbWVGb3JtYXQ9e2ZpbHRlci50aW1lRm9ybWF0fVxuICAgICAgICAgICAgdGltZXpvbmU9e2ZpbHRlci50aW1lem9uZX1cbiAgICAgICAgICAvPlxuICAgICAgICApIDogbnVsbH1cbiAgICAgIDwvVGltZUJvdHRvbVdpZGdldElubmVyPlxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIFJlYWN0Lm1lbW8oVGltZVdpZGdldCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpbWVXaWRnZXRGYWN0b3J5O1xuIl19