"use strict";

// Copyright (c) 2023 Uber Technologies, Inc.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.
var resolve = require('path').resolve;

var join = require('path').join; // Import package.json to read version


var KeplerPackage = require("../package");

var SRC_DIR = resolve(__dirname, '../src');
var OUTPUT_DIR = resolve(__dirname, '../umd');

var LIBRARY_BUNDLE_CONFIG = function LIBRARY_BUNDLE_CONFIG(env) {
  return {
    entry: {
      KeplerGl: join(SRC_DIR, 'index.ts')
    },
    // Silence warnings about big bundles
    stats: {
      warnings: false
    },
    output: {
      // Generate the bundle in dist folder
      path: OUTPUT_DIR,
      filename: 'keplergl.min.js',
      globalObject: 'this',
      library: '[name]',
      libraryTarget: 'umd'
    },
    // let's put everything in
    externals: {
      react: {
        root: 'React',
        commonjs2: 'react',
        commonjs: 'react',
        amd: 'react',
        umd: 'react'
      },
      'react-dom': {
        root: 'ReactDOM',
        commonjs2: 'react-dom',
        commonjs: 'react-dom',
        amd: 'react-dom',
        umd: 'react-dom'
      },
      redux: {
        root: 'Redux',
        commonjs2: 'redux',
        commonjs: 'redux',
        amd: 'redux',
        umd: 'redux'
      },
      'react-redux': {
        root: 'ReactRedux',
        commonjs2: 'react-redux',
        commonjs: 'react-redux',
        amd: 'react-redux',
        umd: 'react-redux'
      },
      'styled-components': {
        commonjs: 'styled-components',
        commonjs2: 'styled-components',
        amd: 'styled-components',
        root: 'styled'
      }
    },
    resolve: {
      extensions: ['.tsx', '.ts', '.js'],
      modules: ['node_modules', SRC_DIR]
    },
    module: {
      rules: [{
        test: /\.(js|ts|tsx)$/,
        loader: 'babel-loader',
        include: [SRC_DIR],
        options: {
          plugins: [['search-and-replace', {
            rules: [{
              search: "3.0.0-alpha.0",
              replace: KeplerPackage.version
            }]
          }]]
        }
      }]
    },
    node: {
      fs: 'empty'
    }
  };
};

module.exports = function (env) {
  return LIBRARY_BUNDLE_CONFIG(env);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9sb2NhbGl6YXRpb24vd2VicGFjay91bWQuanMiXSwibmFtZXMiOlsicmVzb2x2ZSIsInJlcXVpcmUiLCJqb2luIiwiS2VwbGVyUGFja2FnZSIsIlNSQ19ESVIiLCJfX2Rpcm5hbWUiLCJPVVRQVVRfRElSIiwiTElCUkFSWV9CVU5ETEVfQ09ORklHIiwiZW52IiwiZW50cnkiLCJLZXBsZXJHbCIsInN0YXRzIiwid2FybmluZ3MiLCJvdXRwdXQiLCJwYXRoIiwiZmlsZW5hbWUiLCJnbG9iYWxPYmplY3QiLCJsaWJyYXJ5IiwibGlicmFyeVRhcmdldCIsImV4dGVybmFscyIsInJlYWN0Iiwicm9vdCIsImNvbW1vbmpzMiIsImNvbW1vbmpzIiwiYW1kIiwidW1kIiwicmVkdXgiLCJleHRlbnNpb25zIiwibW9kdWxlcyIsIm1vZHVsZSIsInJ1bGVzIiwidGVzdCIsImxvYWRlciIsImluY2x1ZGUiLCJvcHRpb25zIiwicGx1Z2lucyIsInNlYXJjaCIsInJlcGxhY2UiLCJ2ZXJzaW9uIiwibm9kZSIsImZzIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLElBQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBUCxDQUFnQkQsT0FBaEM7O0FBQ0EsSUFBTUUsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBRCxDQUFQLENBQWdCQyxJQUE3QixDLENBRUE7OztBQUNBLElBQU1DLGFBQWEsR0FBR0YsT0FBTyxjQUE3Qjs7QUFFQSxJQUFNRyxPQUFPLEdBQUdKLE9BQU8sQ0FBQ0ssU0FBRCxFQUFZLFFBQVosQ0FBdkI7QUFDQSxJQUFNQyxVQUFVLEdBQUdOLE9BQU8sQ0FBQ0ssU0FBRCxFQUFZLFFBQVosQ0FBMUI7O0FBRUEsSUFBTUUscUJBQXFCLEdBQUcsU0FBeEJBLHFC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InNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAyMyBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cbmNvbnN0IHJlc29sdmUgPSByZXF1aXJlKCdwYXRoJykucmVzb2x2ZTtcbmNvbnN0IGpvaW4gPSByZXF1aXJlKCdwYXRoJykuam9pbjtcblxuLy8gSW1wb3J0IHBhY2thZ2UuanNvbiB0byByZWFkIHZlcnNpb25cbmNvbnN0IEtlcGxlclBhY2thZ2UgPSByZXF1aXJlKCcuLi9wYWNrYWdlJyk7XG5cbmNvbnN0IFNSQ19ESVIgPSByZXNvbHZlKF9fZGlybmFtZSwgJy4uL3NyYycpO1xuY29uc3QgT1VUUFVUX0RJUiA9IHJlc29sdmUoX19kaXJuYW1lLCAnLi4vdW1kJyk7XG5cbmNvbnN0IExJQlJBUllfQlVORExFX0NPTkZJRyA9IGVudiA9PiAoe1xuICBlbnRyeToge1xuICAgIEtlcGxlckdsOiBqb2luKFNSQ19ESVIsICdpbmRleC50cycpXG4gIH0sXG5cbiAgLy8gU2lsZW5jZSB3YXJuaW5ncyBhYm91dCBiaWcgYnVuZGxlc1xuICBzdGF0czoge1xuICAgIHdhcm5pbmdzOiBmYWxzZVxuICB9LFxuXG4gIG91dHB1dDoge1xuICAgIC8vIEdlbmVyYXRlIHRoZSBidW5kbGUgaW4gZGlzdCBmb2xkZXJcbiAgICBwYXRoOiBPVVRQVVRfRElSLFxuICAgIGZpbGVuYW1lOiAna2VwbGVyZ2wubWluLmpzJyxcbiAgICBnbG9iYWxPYmplY3Q6ICd0aGlzJyxcbiAgICBsaWJyYXJ5OiAnW25hbWVdJyxcbiAgICBsaWJyYXJ5VGFyZ2V0OiAndW1kJ1xuICB9LFxuXG4gIC8vIGxldCdzIHB1dCBldmVyeXRoaW5nIGluXG4gIGV4dGVybmFsczoge1xuICAgIHJlYWN0OiB7XG4gICAgICByb290OiAnUmVhY3QnLFxuICAgICAgY29tbW9uanMyOiAncmVhY3QnLFxuICAgICAgY29tbW9uanM6ICdyZWFjdCcsXG4gICAgICBhbWQ6ICdyZWFjdCcsXG4gICAgICB1bWQ6ICdyZWFjdCdcbiAgICB9LFxuICAgICdyZWFjdC1kb20nOiB7XG4gICAgICByb290OiAnUmVhY3RET00nLFxuICAgICAgY29tbW9uanMyOiAncmVhY3QtZG9tJyxcbiAgICAgIGNvbW1vbmpzOiAncmVhY3QtZG9tJyxcbiAgICAgIGFtZDogJ3JlYWN0LWRvbScsXG4gICAgICB1bWQ6ICdyZWFjdC1kb20nXG4gICAgfSxcbiAgICByZWR1eDoge1xuICAgICAgcm9vdDogJ1JlZHV4JyxcbiAgICAgIGNvbW1vbmpzMjogJ3JlZHV4JyxcbiAgICAgIGNvbW1vbmpzOiAncmVkdXgnLFxuICAgICAgYW1kOiAncmVkdXgnLFxuICAgICAgdW1kOiAncmVkdXgnXG4gICAgfSxcbiAgICAncmVhY3QtcmVkdXgnOiB7XG4gICAgICByb290OiAnUmVhY3RSZWR1eCcsXG4gICAgICBjb21tb25qczI6ICdyZWFjdC1yZWR1eCcsXG4gICAgICBjb21tb25qczogJ3JlYWN0LXJlZHV4JyxcbiAgICAgIGFtZDogJ3JlYWN0LXJlZHV4JyxcbiAgICAgIHVtZDogJ3JlYWN0LXJlZHV4J1xuICAgIH0sXG4gICAgJ3N0eWxlZC1jb21wb25lbnRzJzoge1xuICAgICAgY29tbW9uanM6ICdzdHlsZWQtY29tcG9uZW50cycsXG4gICAgICBjb21tb25qczI6ICdzdHlsZWQtY29tcG9uZW50cycsXG4gICAgICBhbWQ6ICdzdHlsZWQtY29tcG9uZW50cycsXG4gICAgICByb290OiAnc3R5bGVkJ1xuICAgIH1cbiAgfSxcbiAgcmVzb2x2ZToge1xuICAgIGV4dGVuc2lvbnM6IFsnLnRzeCcsICcudHMnLCAnLmpzJ10sXG4gICAgbW9kdWxlczogWydub2RlX21vZHVsZXMnLCBTUkNfRElSXVxuICB9LFxuICBtb2R1bGU6IHtcbiAgICBydWxlczogW1xuICAgICAge1xuICAgICAgICB0ZXN0OiAvXFwuKGpzfHRzfHRzeCkkLyxcbiAgICAgICAgbG9hZGVyOiAnYmFiZWwtbG9hZGVyJyxcbiAgICAgICAgaW5jbHVkZTogW1NSQ19ESVJdLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgcGx1Z2luczogW1xuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAnc2VhcmNoLWFuZC1yZXBsYWNlJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJ1bGVzOiBbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaDogJ19fUEFDS0FHRV9WRVJTSU9OX18nLFxuICAgICAgICAgICAgICAgICAgICByZXBsYWNlOiBLZXBsZXJQYWNrYWdlLnZlcnNpb25cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBdXG4gIH0sXG5cbiAgbm9kZToge1xuICAgIGZzOiAnZW1wdHknXG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVudiA9PiBMSUJSQVJZX0JVTkRMRV9DT05GSUcoZW52KTtcbiJdfQ==